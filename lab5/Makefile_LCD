export ARCH=arm
export CROSS_COMPILE=arm-linux-gnueabihf-
ccflags-y := -std=gnu99
obj-m += lcd.o
# Kernel Source Directory
KDIR = ../../bb-kernel/KERNEL
PWD = $(shell pwd) 

#CC=gcc
#CFLAGS=-std=c99

all: adc_listener tank tank_entry bt_listener lcd_kernel

adc_listener: adc_listener.c adc_listener.h lab4_common.c lab4_common.h
	gcc -std=c99 -o adc_listener.exe adc_listener.c lab4_common.c -lrt

tank: tank.c tank.h lab4_common.c lab4_common.h
	gcc -std=c99 -o tank.exe tank.c lab4_common.c

tank_entry: tank_entry.c tank_entry.h lab4_common.c lab4_common.h
	gcc -std=c99 -o tank_entry.exe tank_entry.c lab4_common.c

bt_listener: bt_listener.c bt_listener.h 
	gcc -std=c99 -o bt_listener.exe bt_listener.c 

lcd_kernel:
	$(MAKE) -C $(KDIR) SUBDIRS=$(PWD) modules
	
clean:
	$(MAKE) -C $(KDIR) SUBDIRS=$(PWD) clean
	rm -rf *.exe
